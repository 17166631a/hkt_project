(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/HKT.e1200baf.png"},26:function(e,t){},33:function(e,t,a){e.exports=a.p+"static/media/HKT.e1200baf.png"},34:function(e,t){["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map(function(e){return"."+e}).join(",")},38:function(e,t,a){e.exports=a(85)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},58:function(e,t){},59:function(e,t){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),s=a.n(c),o=a(32),l=a.n(o),i=(a(43),a(2)),m=a(3),u=a(5),d=a(4),p=a(6),g=(a(44),a(88)),f=a(90),h=a(89),E=a(11),v=a(33),b=a.n(v),N=(a(45),a(36)),y={username:""},O="",k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.validateUser=function(e){fetch("".concat(se,"/users/validation?username=").concat(a.state.username,"&password=").concat(a.state.password)).then(function(e){return e.json()}).then(function(e){console.log(e.data[0]),e.data.length>0?(y=e.data[0],O=e.data[0].user_type,a.setState({isAuthenticated:!0})):(a.setState({errorMessage:"Incorrect username or password"}),console.log(a.state.errorMessage))}).catch(function(e){return console.log(e)})},a.onSubmit=function(e){e.preventDefault(),""===a.state.password||""===a.state.username?a.setState({errorMessage:"Please enter username and password"}):(a.setState({errorMessage:""}),a.validateUser())},a.state={username:"",password:"",isAuthenticated:!1,errorMessage:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,this.state.isAuthenticated?s.a.createElement(N.a,{to:{pathname:"/main"}}):s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:"login container"},s.a.createElement("img",{src:b.a,alt:"Logo"}),s.a.createElement("div",{className:"title"},"Order Monitoring System"),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-input"},s.a.createElement("input",{type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:this.onChange})),s.a.createElement("div",{className:"form-input"},s.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.onChange})),s.a.createElement("button",{type:"submit",name:"submit",value:"LOGIN",className:"btn-login"},"LOGIN")),""!==this.state.errorMessage?s.a.createElement("div",{className:"errorMessage"},this.state.errorMessage):s.a.createElement(s.a.Fragment,null))))}}]),t}(c.Component),j=(a(49),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"navbar"},s.a.createElement("div",{className:"Wrapper user",onClick:function(){return e.props.onClick("profile")}},s.a.createElement("i",{className:"fas fa-user-circle userIcon"}),s.a.createElement("div",{className:"username"},y.username)),s.a.createElement("div",{className:"sperator"}),s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[0])}},s.a.createElement("i",{className:"fas fa-list-ul listIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[0]),s.a.createElement("div",{className:"underline"})),s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[1])}},s.a.createElement("i",{className:"fas fa-plus plusIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[1]),s.a.createElement("div",{className:"underline"})),s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[2])}},s.a.createElement("i",{className:"fas fa-file fileIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[2]),s.a.createElement("div",{className:"underline"})),s.a.createElement(s.a.Fragment,null)),s.a.createElement("div",{className:"logoutWrapper"},s.a.createElement("i",{className:"fas fa-sign-out-alt logoutIcon",onClick:this.props.logout}),s.a.createElement("div",{className:"logoutTag",onClick:this.props.logout},"Logout")))}}]),t}(c.Component)),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"navbar"},s.a.createElement("div",{className:"Wrapper user",onClick:function(){return e.props.onClick("profile")}},s.a.createElement("i",{className:"fas fa-user-circle userIcon"}),s.a.createElement("div",{className:"username"},y.username)),s.a.createElement("div",{className:"sperator"}),s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[0])}},s.a.createElement("i",{className:"fas fa-list-ul listIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[0]),s.a.createElement("div",{className:"underline"})),s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[1])}},s.a.createElement("i",{className:"fas fa-plus plusIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[1]),s.a.createElement("div",{className:"underline"})),s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[2])}},s.a.createElement("i",{className:"fas fa-file fileIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[2]),s.a.createElement("div",{className:"underline"}))),s.a.createElement("div",{className:"logoutWrapper"},s.a.createElement("i",{className:"fas fa-sign-out-alt logoutIcon",onClick:this.props.logout}),s.a.createElement("div",{className:"logoutTag",onClick:this.props.logout},"Logout")))}}]),t}(c.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"navbar"},s.a.createElement("div",{className:"Wrapper user",onClick:function(){return e.props.onClick("profile")}},s.a.createElement("i",{className:"fas fa-user-circle userIcon"}),s.a.createElement("div",{className:"username"},y.username)),s.a.createElement("div",{className:"sperator"}),s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[0])}},s.a.createElement("i",{className:"fas fa-list-ul listIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[0]),s.a.createElement("div",{className:"underline"})),s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[1])}},s.a.createElement("i",{className:"fas fa-file fileIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[1]),s.a.createElement("div",{className:"underline"})),s.a.createElement("li",{className:"nav-item",onClick:function(){return e.props.onClick(ae[2])}},s.a.createElement("i",{className:"fas fa-tools workItemsIcon navIcons"}),s.a.createElement("div",{className:"nav-link"},ae[2]),s.a.createElement("div",{className:"underline"})),s.a.createElement(s.a.Fragment,null)),s.a.createElement("div",{className:"logoutWrapper"},s.a.createElement("i",{className:"fas fa-sign-out-alt logoutIcon",onClick:this.props.logout}),s.a.createElement("div",{className:"logoutTag",onClick:this.props.logout},"Logout")))}}]),t}(c.Component),I=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props;return s.a.createElement(s.a.Fragment,null,"hktcs"===O?s.a.createElement(j,{onClick:e.onClick,logout:e.logout}):"et"===O?s.a.createElement(_,{onClick:e.onClick,logout:e.logout}):"admin"===O?s.a.createElement(C,{onClick:e.onClick,logout:e.logout}):s.a.createElement(s.a.Fragment,null))}}]),t}(c.Component),S=a(87),T=a(16),w=a(12),D=(a(50),a(51),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"PageHeader"},s.a.createElement("h2",{className:"heading"},this.props.pageName))}}]),t}(c.Component)),F=(a(52),a(21)),x=a.n(F),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){a.setState({keyword:e.target.value},function(){"admin"===O||"hktcs"===O?a.props.find(a.state.searchField,a.state.keyword):a.props.findForET(a.state.searchField,a.state.keyword)})},a.selectOnChange=function(e){a.setState({searchField:e.target.value})},a.onBlur=function(e){e.target.value="",a.setState({keyword:""})},a.switchField=function(e){console.log("MAMA"),"Orders"===a.props.pageType?a.setState({searchField:"order_number"}):a.setState({searchField:"work_item_id"})},a.state={keyword:"",searchField:"order_number"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,"Orders"===this.props.pageType?s.a.createElement("div",{className:"SearchBar"},s.a.createElement("img",{src:x.a,alt:"logo",width:"200px",className:"HKTLogo"}),s.a.createElement("input",{type:"text",className:"textBar",placeholder:"Search...",name:this.state.keyword,onChange:this.onChange,onBlur:this.onBlur}),s.a.createElement("i",{className:"fas fa-search searchIcon"}),s.a.createElement("select",{value:this.state.searchField,className:"selectOrderFields",onChange:this.selectOnChange},s.a.createElement("option",{value:"order_number"},"Order#"),s.a.createElement("option",{value:"BSN"},"BSN"),s.a.createElement("option",{value:"order_status"},"Status"),s.a.createElement("option",{value:"assigning_date"},"Assigning Date"),s.a.createElement("option",{value:"pre_visit_date"},"Pre-visit Date"),s.a.createElement("option",{value:"wiring_date"},"Wiring Date"),s.a.createElement("option",{value:"team_id"},"Team ID"))):s.a.createElement("div",{className:"SearchBar"},s.a.createElement("img",{src:x.a,alt:"logo",width:"200px",className:"HKTLogo"})))}}]),t}(c.Component),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getETOrders=function(e){console.log("getETOrders"),n=[],a.setState({orderObjects:[]},function(){fetch("http://localhost:8080/users/et_details?username=".concat(y.username)).then(function(e){return e.json()}).then(function(e){a.setState({userDetails:e.data[0]},function(){fetch("".concat(se,"/orders/find?field=team_id&keyword=").concat(a.state.userDetails.team_id)).then(function(e){return e.json()}).then(function(e){e.data.forEach(function(e){n=[].concat(Object(w.a)(a.state.orderObjects),[e]),a.setState({orderObjects:[].concat(Object(w.a)(a.state.orderObjects),[e])})})})})}).catch(function(e){return console.log(e)})})},a.getOrders=function(e){n=[],a.setState({orderObjects:[]},function(){fetch("".concat(se,"/orders")).then(function(e){return e.json()}).then(function(e){e.data.forEach(function(e){a.checkPink(e)&&(e=Object(T.a)({},e,{color:{backgroundColor:"pink"}}),n=[].concat(Object(w.a)(a.state.orderObjects),[e]),a.setState({orderObjects:[].concat(Object(w.a)(a.state.orderObjects),[e])},function(){return console.log(a.state.orderObjects)}))}),e.data.forEach(function(e){a.checkGrey(e)&&(e=Object(T.a)({},e,{color:{backgroundColor:"#CDCDCD"}}),n=[].concat(Object(w.a)(a.state.orderObjects),[e]),a.setState({orderObjects:[].concat(Object(w.a)(a.state.orderObjects),[e])},function(){return console.log(a.state.total_grey)}))}),e.data.forEach(function(e){a.checkPink(e)||a.checkGrey(e)||(n=[].concat(Object(w.a)(a.state.orderObjects),[e]),a.setState({orderObjects:[].concat(Object(w.a)(a.state.orderObjects),[e])},function(){return console.log(a.state.orderObjects)}))})}).catch(function(e){return console.log(e)})})},a.checkPink=function(e){var t=a.countDaysPast(new Date(e.pre_visit_date.slice(0,10))),n=a.countDaysPast(new Date(e.wiring_date.slice(0,10)));return(("Assigned"===e.order_status&&"0000-00-00"===e.wiring_date||2===e.pending_reason_id)&&t>=2||3===e.pending_reason_id&&n>=2)&&"Completed"!==e.order_status},a.checkGrey=function(e){var t=a.countDaysPast(new Date(e.pre_visit_date.slice(0,10)));return e.pending_reason_id>=14&&e.pending_reason_id<=22&&(a.getDelayDays(e.pending_reason_id),t>=a.state.delay_days&&"Completed"!==e.order_status)},a.getDelayDays=function(e){fetch("".concat(se,"/reasons")).then(function(e){return e.json()}).then(function(t){t.data.forEach(function(t){t.reason_id===e&&a.setState({delay_days:t.delay_days})})}).catch(function(e){return console.log(e)})},a.countDaysPast=function(e){var t=[];fetch("".concat(se,"/holidays")).then(function(e){return e.json()}).then(function(e){t=e.data}).catch(function(e){return console.log(e)});var a=new Date;if(a<e)return 0;e.setHours(0,0,0,1),a.setHours(23,59,59,999);var n=a-e,r=Math.ceil(n/864e5);r-=2*Math.floor(r/7);var c=e.getDay(),s=a.getDay();c-s>1&&(r-=2),0===c&&6!==s&&r--,6===s&&0!==c&&r--;var o=e.getFullYear()+"-"+(e.getMonth+1)+"-"+e.getDate(),l=a.getFullYear()+"-"+(a.getMonth+1)+"-"+a.getDate();for(var i in t)t[i]>=o&&t[i]<=l&&r--;return r},a.findETOrders=function(e,t){a.state.orderObjects.forEach(function(r){fetch("".concat(se,"/orders/find?field=team_id&keyword=").concat(a.state.userDetails.team_id,"&field2=").concat(e,"&keyword2=").concat(t)).then(function(e){return e.json()}).then(function(e){console.log(e.data),void 0!==e.data[0]&&""!==t?(n=[],a.setState({orderObjects:[]},function(){console.log(e.data),e.data.length,e.data.forEach(function(e){n.push(e),console.log(n);var t=Object.assign({},a.state);t.orderObjects.push(e),a.setState({stateCopy:t},function(){return console.log(a.state.orderObjects)})})})):""===t?a.getETOrders():(console.log(e.data[0]),0,a.setState({orderObjects:[]}),n=[])})})},a.findOrders=function(e,t){fetch("".concat(se,"/orders/find?field=").concat(e,"&keyword=").concat(t)).then(function(e){return e.json()}).then(function(e){void 0!==e.data[0]&&""!==t?(n=[],a.setState({orderObjects:[]},function(){e.data.length,e.data.forEach(function(e){if(a.checkPink(e)){e=Object(T.a)({},e,{color:{backgroundColor:"pink"}}),n.push(e),console.log(n);var t=Object.assign({},a.state);t.orderObjects.push(e),a.setState({stateCopy:t},function(){return console.log(a.state.orderObjects)})}}),e.data.forEach(function(e){if(a.checkGrey(e)){e=Object(T.a)({},e,{color:{backgroundColor:"#CDCDCD"}}),n.push(e),console.log(n);var t=Object.assign({},a.state);t.orderObjects.push(e),a.setState({stateCopy:t},function(){return console.log(a.state.orderObjects)})}}),e.data.forEach(function(e){if(!a.checkPink(e)&&!a.checkGrey(e)){n.push(e),console.log(n);var t=Object.assign({},a.state);t.orderObjects.push(e),a.setState({stateCopy:t},function(){return console.log(a.state.orderObjects)})}})})):""===t?a.getOrders():(0,a.setState({orderObjects:[]}),n=[])}).catch(function(e){return console.log(e)})},a.appendorderObjects=function(e){for(var t=a.state.orderObjects,n=[],r=[],c=a.state.orderObjects.length,o=function(e){r.push(s.a.createElement("td",{key:e+1*c},s.a.createElement("div",{className:"orderNo",onClick:function(){return a.props.onClick("Odetails",e)}},s.a.createElement("font",{style:t[e].color},t[e].order_number)))),r.push(s.a.createElement("td",{key:e+2*c},t[e].BSN)),r.push(s.a.createElement("td",{key:e+3*c},t[e].order_status)),a.appendDate(t[e].assigning_date,r,e,c,4),a.appendDate(t[e].pre_visit_date,r,e,c,5),a.appendDate(t[e].wiring_date,r,e,c,6),r.push(s.a.createElement("td",{key:e+7*c},t[e].team_id)),n.push(s.a.createElement("tr",{key:e+8*c},r)),r=[]},l=0;l<c;l++)o(l);return n},a.appendDate=function(e,t,a,r,c){if("0000-00-00"===e.slice(0,10))t.push(s.a.createElement("td",{key:a+6*r},"-"));else{var o=new Date(e);console.log(n[a].order_number+" "+o);var l=o.getFullYear(),i=o.getMonth()+1;i<10&&(i="0"+i);var m=o.getDate();m<10&&(m="0"+m),t.push(s.a.createElement("td",{key:a+c*r},l+"-"+i+"-"+m))}},a.state={pageName:"Orders",orderObjects:[],delay_days:0,userDetails:{}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){"admin"===O||"hktcs"===O?this.getOrders():this.getETOrders(),console.log(this.state.orderObjects)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{pageType:this.props.pageType,find:this.findOrders,findForET:this.findETOrders}),s.a.createElement("div",{className:"OrderList MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName}),s.a.createElement("div",{className:"refreshBtnWrapper"},s.a.createElement("i",{className:"fas fa-sync refreshIcon",onClick:"admin"===O||"hktcs"===O?this.getOrders:this.getETOrders}),s.a.createElement("div",{className:"refreshTag"},"refresh")),s.a.createElement("table",{border:"1px",className:"table table-hover table-striped table-bordered orderTable"},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",null,"Order#"),s.a.createElement("th",null,"BSN"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Assigning Date"),s.a.createElement("th",null,"Pre-Visit Date"),s.a.createElement("th",null,"Wiring Date"),s.a.createElement("th",null,"Team ID"))),void 0!==this.state.orderObjects[0]?s.a.createElement("tbody",null,this.appendorderObjects()):s.a.createElement("tbody",{className:"not_found_tag"},s.a.createElement("tr",null,s.a.createElement("td",null,"no result"))))))}}]),t}(c.Component),U=(a(53),a(13)),q=a.n(U),P=function(e){for(var t=[],a=q.a.utils.decode_range(e).e.c+1,n=0;n<a;++n)t[n]={name:q.a.utils.encode_col(n),key:n};return t},M=a(34),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){var t=e.target.files;t&&t[0]&&a.setState({file:t[0]})},a.handleFile=function(e){var t=new FileReader,n=!!t.readAsBinaryString;t.onload=function(e){var t=e.target.result,r=q.a.read(t,{type:n?"binary":"array",bookVBA:!0}),c=r.SheetNames[0],s=r.Sheets[c],o=q.a.utils.sheet_to_json(s);a.setState({data:o,cols:P(s["!ref"])},function(){console.log(JSON.stringify(a.state.data,null,2))});var l=a.state.data;console.log(a.state.data[0].order_number);for(var i=0;i<l.length;i++)fetch("".concat(se,"/orders/insert?order_number=").concat(l[i].order_number,"&BSN=").concat(l[i].BSN,"&assigning_date=").concat(l[i].assigning_date,"&pre_visit_date=").concat(l[i].pre_visit_date,"&wiring_date=").concat(l[i].wiring_date,"&team_id=").concat(l[i].team_id)).then(function(e){return e.json()}).then(function(e){a.setState({updateLog:e.data,showSuccess:!0})}).catch(function(e){return console.log(e)})},n?t.readAsBinaryString(a.state.file):t.readAsArrayBuffer(a.state.file)},a.state={pageName:"Import",file:{},data:[],cols:[],showSuccess:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{pageType:this.props.type}),s.a.createElement("div",{className:"ImportPage MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName}),s.a.createElement("div",{className:"tag"},"Choose an excel file to import orders"),s.a.createElement("form",{className:"file_upload_form"},s.a.createElement("div",{className:"custom-file"},s.a.createElement("input",{type:"file",className:"form-control fileInput",id:"file",accept:M.SheetJSFT,onChange:this.handleChange}),s.a.createElement("br",null),s.a.createElement("div",{type:"submit",onClick:this.handleFile,className:"submitBtn"},"submit")),this.state.showSuccess?s.a.createElement("div",{className:"successTag"},"Successfully Imported"):s.a.createElement(s.a.Fragment,null))))}}]),t}(c.Component),Q=(a(60),{}),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getQuotations=function(e){fetch("".concat(se,"/quotations/find")).then(function(e){return e.json()}).then(function(e){Q=e.data,a.setState({quotationObjects:e.data,totalQuotations:e.data.length},function(){return console.log(a.state.quotationObjects)})}).catch(function(e){return console.log(e)})},a.appendQuotationObjects=function(e){for(var t=a.state.quotationObjects,n=[],r=[],c=a.state.totalQuotations,o=function(e){var o=t[e].submition_date.slice(0,10);console.log(t[e].submition_date);var l=void 0;l=":"===t[e].submition_date.slice(12,13)?t[e].submition_date.slice(11,12):t[e].submition_date.slice(11,13),l=parseInt(l)+8;var i=t[e].submition_date.slice(13,19);r.push(s.a.createElement("td",{key:e+1*c},s.a.createElement("div",{className:"orderNo",onClick:function(){return a.props.onClick("Qdetails",e)}},t[e].quotation_id))),r.push(s.a.createElement("td",{key:e+3*c},t[e].order_number)),r.push(s.a.createElement("td",{key:e+4*c},t[e].BSN)),r.push(s.a.createElement("td",{key:e+5*c},o+"("+l+i+")")),n.push(s.a.createElement("tr",{key:e+7*c},r)),r=[]},l=0;l<c;l++)o(l);return n},a.state={pageName:"Quotations",totalQuotations:0,quotationObjects:{},quotationIndex:0,type:"quotations"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.getQuotations()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{pageType:this.props.type}),"quotations"===this.state.type?s.a.createElement("div",{className:"QuotationPage MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName}),s.a.createElement("div",{className:"refreshBtnWrapper"},s.a.createElement("i",{className:"fas fa-sync refreshIcon",onClick:this.props.getOrders}),s.a.createElement("div",{className:"refreshTag"},"refresh")),s.a.createElement("table",{border:"1px",className:"table table-hover table-striped table-bordered orderTable"},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",null,"Quotaion ID"),s.a.createElement("th",null,"Order#"),s.a.createElement("th",null,"BSN"),s.a.createElement("th",null,"Quotation date"))),s.a.createElement("tbody",null,this.appendQuotationObjects()))):s.a.createElement(s.a.Fragment,null))}}]),t}(c.Component),L=(a(61),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={pageName:"Teams"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{pageType:this.props.type}),s.a.createElement("div",{className:"TeamsPage MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName})))}}]),t}(c.Component)),G=(a(62),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getUserDetails=function(e){var t;t="admin"===O||"hktcs"===O?"hktcs":"et",fetch("".concat(se,"/users/").concat(t,"_details?username=").concat(y.username)).then(function(e){return e.json()}).then(function(e){a.setState({userDetails:e.data[0]})}).catch(function(e){return console.log(e)})},a.state={pageName:"User",userDetails:{}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getUserDetails()}},{key:"render",value:function(){var e=this.state.userDetails;return s.a.createElement("div",{className:"UserProfilePage MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName}),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"card"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"usernameField"},"Username: "),s.a.createElement("td",{className:"usernameData"},e.username)),"hktcs"===O||"admin"===O?s.a.createElement("tr",null,s.a.createElement("th",{className:"staff_idField"},"Staff ID: "),s.a.createElement("td",{className:"staff_idData"},e.staff_id)):s.a.createElement("tr",null,s.a.createElement("th",{className:"tean_idField"},"Team ID: "),s.a.createElement("td",{className:"tean_idData"},e.team_id)),s.a.createElement("tr",null,s.a.createElement("th",{className:"emailField"},"Email: "),s.a.createElement("td",{className:"emailData"},e.email)),s.a.createElement("tr",null,s.a.createElement("th",{className:"telField"},"Tel: "),s.a.createElement("td",{className:"telData"},e.tel)))))))}}]),t}(c.Component)),V=(a(63),new Date),$=V.getFullYear()+"-"+(V.getMonth()+1)+"-"+V.getDate()+" "+V.getHours()+":"+V.getMinutes()+":"+V.getSeconds(),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).componentWillMount=function(e){a.getItemID()},a.getItemID=function(e){fetch("".concat(se,"/workitems/find?field=type&keyword=").concat(a.state.type)).then(function(e){return e.json()}).then(function(e){a.setState({workitems:e.data})}).catch(function(e){console.log(e)})},a.orderNumOnChange=function(e){a.setState({OrderNum:e.target.value,itemObjects:[{itemID:"",Description:"",Unit:"",UnitRate:"0",Qty:""}]},function(){fetch("".concat(se,"/orders/findThe?field=order_number&keyword=").concat(a.state.OrderNum)).then(function(e){return e.json()}).then(function(e){console.log(e.data[0]),a.setState({BSN:e.data[0].BSN})}).catch(function(e){a.setState({BSN:""})}),console.log(a.state),fetch("".concat(se,"/teamType/find?order_number=").concat(a.state.OrderNum)).then(function(e){return e.json()}).then(function(e){console.log(e.data[0]),a.setState({type:e.data[0].type},function(){return a.getItemID()})}).catch(function(e){a.setState({type:"",workitems:[]})}),console.log(a.state)})},a.itemOnchange=function(e,t){var n=a.state,r=Object.assign({},a.state);r.itemObjects[t].itemID=e.target.value,a.setState({stateCopy:r}),n.itemObjects[t].itemID=e.target.value,fetch("".concat(se,"/workitems/find?field=type&keyword=").concat(n.type,"&field2=work_item_id&keyword2=").concat(n.itemObjects[t].itemID)).then(function(e){return e.json()}).then(function(e){var r=Object.assign({},a.state);r.itemObjects[t].Description=e.data[0].description,r.itemObjects[t].Unit=e.data[0].unit,r.itemObjects[t].UnitRate=e.data[0].unit_rate,a.setState({stateCopy:r}),console.log(n.itemObjects[t])}).catch(function(e){return console.log(e)})},a.qtyOnChange=function(e,t){var n=Object.assign({},a.state);n.itemObjects[t].Qty=e.target.value,a.setState({stateCopy:n})},a.onChange=function(e){a.setState(Object(E.a)({},e.target.id,e.target.value),function(){return a.getItemID()})},a.closeToast=function(e){a.setState({isConfirming:!1})},a.onSubmit=function(e){var t=a.state;e.preventDefault(),""===t.BSN?a.setState({orderNumInvalid:!0,itemInvalid:!1}):a.setState({orderNumInvalid:!1},function(){t.itemObjects.forEach(function(e,n){n<t.workItemRows&&(""===e.itemID||""===e.Qty?a.setState({itemInvalid:!0}):a.setState({itemInvalid:!1,isConfirming:!0}))})})},a.insertQuotationForm=function(e){var t=a.state;a.setState({orderNumInvalid:!1,itemInvalid:!1,isConfirming:!1,uploadSuccess:!0},function(){fetch("".concat(se,"/quotations/insert?order_number=").concat(t.OrderNum,"&BSN=").concat(t.BSN,"&remarks=").concat(t.Remarks,"&submition_date=").concat(t.date)).then(function(e){return e.json()}).then(function(e){fetch("".concat(se,"/quotations/find?order_number=").concat(t.OrderNum,"&date=").concat(t.date)).then(function(e){return e.json()}).then(function(e){for(var a=0;a<t.workItemRows;a++)console.log(e.data[0].quotation_id),fetch("".concat(se,"/itemcase/insert?quotation_id=").concat(e.data[0].quotation_id,"&work_item_id=").concat(t.itemObjects[a].itemID,"&item_qty=").concat(t.itemObjects[a].Qty)).then(function(e){return e.json()}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})})},a.addRowOnClick=function(e){a.state.workItemRows<8&&a.setState({workItemRows:a.state.workItemRows+1})},a.renderItemID=function(e){var t=a.state.workitems,n=[];try{for(var r=0;r<t.length;r++)n.push(s.a.createElement("option",{key:r,value:t[r].work_item_id},t[r].work_item_id))}catch(c){}return n},a.renderMoreRows=function(e){var t=a.state,n=[];a.state.itemObjects.push({itemID:"",Description:"",Unit:"",UnitRate:"0",Qty:""});for(var r=function(e){n.push(s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col"},s.a.createElement("select",{id:"itemID",className:"form-control",value:t.itemObjects[e].itemID,onChange:function(t){return a.itemOnchange(t,e)}},s.a.createElement("option",{defaultValue:" "}," "),a.renderItemID())),s.a.createElement("div",{className:"col-6"},s.a.createElement("input",{type:"text",className:"form-control",id:"Description",value:t.itemObjects[e].Description,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"Unit",value:t.itemObjects[e].Unit,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"UnitRate",value:"$".concat(parseFloat(t.itemObjects[e].UnitRate).toFixed(1)),readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"Qty",value:t.itemObjects[e].Qty,onChange:function(t){return a.qtyOnChange(t,e)}})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"Amount",value:"$".concat(parseFloat(t.itemObjects[e].UnitRate*t.itemObjects[e].Qty).toFixed(1)),readOnly:!0}))))},c=1;c<a.state.workItemRows;c++)r(c);return n},a.renderTotalAmount=function(e){for(var t=a.state,n=[],r=0,c=0;c<t.workItemRows-1;c++)r+=t.itemObjects[c].UnitRate*t.itemObjects[c].Qty;return r+=t.itemObjects[t.workItemRows-1].UnitRate*t.itemObjects[t.workItemRows-1].Qty,n.push(s.a.createElement(s.a.Fragment,null,"$"+parseFloat(r).toFixed(1))),n},a.state={pageName:"Upload Quotation",itemObjects:[{itemID:"",Description:"",Unit:"",UnitRate:"0",Qty:""}],OrderNum:"",BSN:"",Remarks:"",date:$,workitems:[],type:"",workItemRows:1,orderNumInvalid:!1,isConfirming:!1,uploadSuccess:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state;return s.a.createElement("div",{className:"UploadPage MainWrapper"},s.a.createElement(D,{pageName:t.pageName}),s.a.createElement("form",{className:"quotation_form",onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col-xs-2"},t.orderNumInvalid?s.a.createElement("div",{className:"invalidOrderNumMsg"},"*Invalid order number"):s.a.createElement(s.a.Fragment,null),s.a.createElement("label",{htmlFor:"OrderNum"},"Order Number: "),s.a.createElement("input",{type:"text",className:"form-control",id:"OrderNum",value:t.OrderNum,onChange:this.orderNumOnChange}))),s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col-sx-2"},s.a.createElement("label",{htmlFor:"BSN"},"BSN: "),s.a.createElement("input",{type:"text",className:"form-control",id:"BSN",value:t.BSN,onChange:this.onChange,readOnly:!0}))),s.a.createElement("hr",null),s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col-sx-2"},s.a.createElement("div",null,"Work Items: "),t.itemInvalid?s.a.createElement("div",{className:"invalidItemFormMsg"},'*Please fill in both "Item ID" and "Qty"'):s.a.createElement(s.a.Fragment,null),s.a.createElement("br",null))),s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"itemID"},"Item ID: "),s.a.createElement("select",{id:"itemID",className:"form-control",value:t.itemObjects[0].itemID,onChange:function(t){return e.itemOnchange(t,0)}},s.a.createElement("option",{defaultValue:" "}," "),this.renderItemID())),s.a.createElement("div",{className:"col-6"},s.a.createElement("label",{htmlFor:"description"},"Description: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Description",value:t.itemObjects[0].Description,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"unit"},"Unit: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Unit",value:t.itemObjects[0].Unit,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"unitRate"},"Unit Rate: "),s.a.createElement("input",{type:"text",className:"form-control",id:"UnitRate",value:"$".concat(parseFloat(t.itemObjects[0].UnitRate).toFixed(1)),readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"qty"},"Qty: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Qty",value:t.itemObjects[0].Qty,onChange:function(t){return e.qtyOnChange(t,0)}})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"amount"},"Amount: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Amount",value:"$".concat(parseFloat(t.itemObjects[0].UnitRate*t.itemObjects[0].Qty).toFixed(1)),readOnly:!0}))),this.renderMoreRows(),s.a.createElement("i",{className:"fas fa-plus addColBtn",onClick:this.addRowOnClick}),s.a.createElement("hr",null),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"remarks"},"Remarks:"),s.a.createElement("textarea",{className:"form-control",id:"Remarks",rows:"3",onChange:this.onChange})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Upload"),t.uploadSuccess?s.a.createElement("div",{className:"uploadSuccessMsg"},"Successfully Uploaded"):s.a.createElement(s.a.Fragment,null))),this.state.isConfirming?s.a.createElement("div",{className:"confirmPromptWrapper"},s.a.createElement("div",{className:"toast uploadConfirmPrompt",role:"alert","aria-live":"assertive","aria-atomic":"true"},s.a.createElement("div",{className:"toast-header"},s.a.createElement("strong",{className:"mr-auto"},"Confirm"),s.a.createElement("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true",onClick:this.closeToast},"\xd7"))),s.a.createElement("div",{className:"toast-body"},"Order Number: ",this.state.OrderNum,s.a.createElement("br",null),"Total Amount: ",this.renderTotalAmount()),s.a.createElement("button",{className:"btn btn-primary confirmBtn",onClick:this.insertQuotationForm},"Confrim"))):s.a.createElement(s.a.Fragment,null))}}]),t}(c.Component),Y=(a(64),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).findItems=function(e,t){fetch("".concat(se,"/workitems/find?field=type&keyword=").concat(r,"&field2=").concat(e,"&keyword2=").concat(t)).then(function(e){return e.json()}).then(function(e){"ATG"===r&&a.setState({ATGitems:e.data,totalItems:e.data.length})}).catch(function(e){return console.log(e)})},a.getitems=function(e){r=e,console.log(e),fetch("".concat(se,"/workitems/find?field=type&keyword=").concat(e)).then(function(e){return e.json()}).then(function(t){"ATG"===e?a.setState({totalItems:t.data.length,ATGitems:t.data}):a.setState({totalItems:t.data.length,IBIitems:t.data})}).catch(function(e){return console.log(e)})},a.appendItems=function(e){var t;t="ATG"===r?a.state.ATGitems:a.state.IBIitems;for(var n=[],c=[],o=a.state.totalItems,l=0;l<o;l++)c.push(s.a.createElement("td",{key:l+1*o},t[l].work_item_id)),c.push(s.a.createElement("td",{key:l+2*o},t[l].description)),c.push(s.a.createElement("td",{key:l+3*o},t[l].unit)),c.push(s.a.createElement("td",{key:l+4*o},0===t[l].unit_rate?"-":"$"+t[l].unit_rate)),n.push(s.a.createElement("tr",{key:l+5*o},c)),c=[];return n},a.state={pageName:"Work Items",ATGitems:[],IBIitems:[],totalItems:0},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.getitems("ATG")}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{pageType:this.props.pageType,find:this.findItems}),s.a.createElement("div",{className:"WrokItemsPage MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName+" ("+r+")"}),s.a.createElement(s.a.Fragment,null),s.a.createElement("button",{type:"button",class:"btn btn-secondary atgBtn",onClick:function(){return e.getitems("ATG")}},"ATG"),s.a.createElement("button",{type:"button",class:"btn btn-secondary ibiBtn",onClick:function(){return e.getitems("IBI")}},"IBI"),s.a.createElement("div",{className:"btnUnderline"}),s.a.createElement("table",{border:"1px",className:"table table-hover table-striped table-bordered workItemTable"},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",{width:"10%"},"Work_item_ID"),s.a.createElement("th",{width:"60%"},"Description"),s.a.createElement("th",{width:"15%"},"unit"),s.a.createElement("th",{width:"15%"},"unit_rate"))),s.a.createElement("tbody",null,void 0!==this.state.ATGitems[0]||void 0!==this.state.IBIitems[0]?this.appendItems():s.a.createElement(s.a.Fragment,null)))))}}]),t}(c.Component)),J=(a(65),{order_number:0,BSN:0,order_status:"",assigning_date:"",pre_visit_date:"",wiring_date:"",team_id:0,pendingReason:""}),K=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getPendingReason=function(e){var t=a.props.orderIndex;fetch("".concat(se,"/reasons/find?reason_id=").concat(n[t].pending_reason_id)).then(function(e){return e.json()}).then(function(e){n[t].pendingReason=e.data[0].description,J.pendingReason=e.data[0].description,a.setState({pendingReason:e.data[0].description})}).catch(function(e){return console.log(e)})},a.editOnClick=function(){a.setState({editing:!0})},a.closeEditOnClick=function(){a.setState({editing:!1,isSuccess:!1})},a.onChange=function(e){var t;a.setState((t={},Object(E.a)(t,e.target.id,e.target.value),Object(E.a)(t,"isSuccess",!1),t))},a.editTypeOnchange=function(e){a.setState({editType:e.target.value,isSuccess:!1,selectedReason:""})},a.statusOnChange=function(e){a.setState({order_status:e.target.value,isSuccess:!1,selectedReason:""})},a.closeToast=function(e){a.setState({isConfirming:!1})},a.onConfirm=function(e){"pending"===a.state.order_status&&"order_status"===a.state.editType?a.setState({isPending:!0},function(){a.setState({isConfirming:!0})}):a.setState({isPending:!1},function(){a.setState({isConfirming:!0})})},a.getModifiedValue=function(e){var t,n=a.state;switch(n.editType){case"order_status":t=n.order_status;break;case"assigning_date":t=n.assigning_date;break;case"pre_visit_date":t=n.pre_visit_date;break;case"wiring_date":t=n.wiring_date;break;case"team_id":t=n.team_id}return console.log(t),t},a.getOriginalValue=function(e){var t;switch(a.state.editType){case"order_status":t=J.order_status;break;case"assigning_date":t=J.assigning_date;break;case"pre_visit_date":t=J.pre_visit_date;break;case"wiring_date":t=J.wiring_date;break;case"team_id":t=J.team_id}return console.log(t),t},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.order_number,r=t.editType,c=new Date,s=String(c.getDate()).padStart(2,"0"),o=String(c.getMonth()+1).padStart(2,"0"),l=c.getFullYear(),i=c.getHours(),m=c.getMinutes(),u=c.getSeconds(),d=a.getOriginalValue(),p=a.getModifiedValue();c=l+"-"+o+"-"+s+"T"+i+":"+m+":"+u,fetch("".concat(se,"/orders/update?order_number=").concat(n,"&field=").concat(r,"&value=").concat(p)).then(function(e){return e.json()}).then(function(e){a.setState({isConfirming:!1,isSuccess:!0}),J=a.state}).catch(function(e){a.setState({isConfirming:!1,isFail:!0})}),fetch("".concat(se,"/orders/insert/updateLog?order_number=").concat(n,"&field=").concat(r,"&original_data=").concat(d,"&modified_data=").concat(p,"&editor=").concat(y.username,"&date=").concat(c,"&remarks=").concat(t.selectedReason)).then(function(e){return e.json()}).then(function(e){console.log(e),a.getUpdateLog()}).catch(function(e){return console.log(e)})},a.getUpdateLog=function(e){fetch("".concat(se,"/orders/find/updateLog?order_number=").concat(a.state.order_number)).then(function(e){return e.json()}).then(function(e){a.setState({updateLog:e.data})}).catch(function(e){return console.log(e)})},a.getReasonsList=function(e){fetch("".concat(se,"/reasons")).then(function(e){return e.json()}).then(function(e){a.setState({reasons:e.data})}).catch(function(e){return console.log(e)})},a.renderLog=function(e){for(var t=a.state.updateLog,n=[],r=0;r<a.state.updateLog.length;r++){var c=t[r].date.slice(0,10),o=t[r].date.slice(12,13);o=parseInt(o)+8;var l=t[r].date.slice(13,19);n.push(s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{key:r},'- change "',t[r].field,'" from ',s.a.createElement("font",{color:"red"},t[r].original_data," "),"to ",s.a.createElement("font",{color:"red"},t[r].modified_data," "),'by "',t[r].editor,'" on "',c+"("+o+l+")",'" ',s.a.createElement("br",null),"pending"===t[r].modified_data?s.a.createElement(s.a.Fragment,null,"\xa0\xa0\xa0-> pending reason: ",s.a.createElement("font",{color:"red"},t[r].remarks),s.a.createElement("br",null)):s.a.createElement(s.a.Fragment,null)),s.a.createElement("br",null)))}return n},a.reasonOnChange=function(e){a.setState({selectedReason:e.target.value},function(){console.log(a.state.selectedReason)})},a.renderReasons=function(e){var t=a.state.reasons,n=[];try{for(var r=0;t.length;r++)n.push(s.a.createElement("option",{key:r,value:t[r].description},t[r].description))}catch(c){console.log(c)}return n};var r=a.props.orderIndex;return a.state={pageName:"Order details",editing:!1,editType:"order_status",isPending:!1,order_number:n[r].order_number,BSN:n[r].BSN,order_status:n[r].order_status,assigning_date:n[r].assigning_date,pre_visit_date:n[r].pre_visit_date,wiring_date:n[r].wiring_date,team_id:n[r].team_id,pendingReason:"",isSuccess:!1,isFail:!1,isConfirming:!1,updateLog:[],reasons:[],selectedReason:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){J=this.state,this.getUpdateLog(),this.getReasonsList(),this.getPendingReason()}},{key:"render",value:function(){var e=this.state;return s.a.createElement("div",{className:"OrderDetails MainWrapper"},this.state.editing?s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{pageName:"Edit Order Details"}),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"Order_editor"},this.state.isSuccess?s.a.createElement("div",{className:"msg"},"Sueccefully Updated!"):s.a.createElement(s.a.Fragment,null),this.state.isFail?s.a.createElement("div",{className:"msg"},"Update Failed"):s.a.createElement(s.a.Fragment,null),s.a.createElement("i",{className:"fas fa-times closeIcon",onClick:this.closeEditOnClick}),s.a.createElement("form",{className:"Order_edit_form",onSubmit:this.onSubmit},this.state.isConfirming&&!this.state.isPending?s.a.createElement("div",{className:"toast comfirmPrompt",role:"alert","aria-live":"assertive","aria-atomic":"true"},s.a.createElement("div",{className:"toast-header"},s.a.createElement("strong",{className:"mr-auto"},"Confirm"),s.a.createElement("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true",onClick:this.closeToast},"\xd7"))),s.a.createElement("div",{className:"toast-body"},"Change ",s.a.createElement("font",{color:"red"},this.state.editType),"\xa0 from ",s.a.createElement("font",{color:"red"},this.getOriginalValue()),"\xa0 to ",s.a.createElement("font",{color:"red"},this.getModifiedValue())),s.a.createElement("button",{type:"submit",className:"btn btn-primary confirmBtn"},"Confirm")):this.state.isConfirming&&this.state.isPending?s.a.createElement("div",{className:"toast comfirmPrompt",role:"alert","aria-live":"assertive","aria-atomic":"true"},s.a.createElement("div",{className:"toast-header"},s.a.createElement("strong",{className:"mr-auto"},"Pending Reason"),s.a.createElement("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true",onClick:this.closeToast},"\xd7"))),s.a.createElement("div",{className:"toast-body"},s.a.createElement("label",{htmlFor:"selectedReason"},"Pending reason: "),s.a.createElement("br",null),s.a.createElement("select",{value:this.state.selectedReason,id:"selectedReason",onChange:this.reasonOnChange},this.renderReasons())),s.a.createElement("button",{type:"submit",className:"btn btn-primary confirmBtn"},"Confirm")):s.a.createElement(s.a.Fragment,null),s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"editType"},"Field: "),s.a.createElement("select",{value:this.state.editType,id:"editType",className:"form-control",onChange:this.editTypeOnchange},s.a.createElement("option",{value:"order_status"},"Status"),s.a.createElement("option",{value:"assigning_date"},"Assigning Date"),s.a.createElement("option",{value:"pre_visit_date"},"Pre-Visit Date"),s.a.createElement("option",{value:"wiring_date"},"Wiring Date"),s.a.createElement("option",{value:"team_id"},"Team ID"))),"order_status"===e.editType?s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"status"},"Status: "),s.a.createElement("select",{value:this.state.order_status,id:"order-status",className:"form-control",onChange:this.statusOnChange},s.a.createElement("option",{value:"assigned"},"assigned"),s.a.createElement("option",{value:"pending"},"pending"),s.a.createElement("option",{value:"complete"},"complete"))):"assigning_date"===e.editType?s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"ad"},"Assigning Date: "),s.a.createElement("input",{type:"date",className:"form-control",id:"assigning_date",value:e.assigning_date,onChange:this.onChange})):"pre_visit_date"===e.editType?s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"pvd"},"Pre-Visit Date: "),s.a.createElement("input",{type:"date",className:"form-control",id:"pre_visit_date",value:e.pre_visit_date,onChange:this.onChange})):"wiring_date"===e.editType?s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"wd"},"Wiring Date: "),s.a.createElement("input",{type:"date",className:"form-control",id:"wiring_date",value:e.wiring_date,onChange:this.onChange})):"team_id"===e.editType?s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"team_id"},"Team ID: "),s.a.createElement("input",{type:"text",className:"form-control",id:"team_id",value:e.team_id,onChange:this.onChange})):s.a.createElement(s.a.Fragment,null)),s.a.createElement("span",{className:"badge badge-primary updateBtn",onClick:this.onConfirm},"Update")))))):s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{pageName:this.state.pageName}),s.a.createElement("div",{className:"editBtnWrapper"},s.a.createElement("i",{className:"fas fa-edit editIcon",onClick:this.editOnClick}),s.a.createElement("div",{className:"editTag"},"Edit")),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"card"},s.a.createElement("table",{className:"table table-hover table-striped detailsTable"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"orderNoField"},"Order Number: "),s.a.createElement("td",{className:"orderNoData"},J.order_number)),s.a.createElement("tr",null,s.a.createElement("th",{className:"BSNField"},"BSN: "),s.a.createElement("td",{className:"BNSData"},J.BSN)),s.a.createElement("tr",null,s.a.createElement("th",{className:"statusField"},"Status: "),s.a.createElement("td",{className:"statusData"},J.order_status)),s.a.createElement("tr",null,s.a.createElement("th",{className:"ADField"},"Assigning Date: "),s.a.createElement("td",{className:"ADData"},J.assigning_date)),s.a.createElement("tr",null,s.a.createElement("th",{className:"PVField"},"Pre-Visit Date: "),s.a.createElement("td",{className:"PVData"},J.pre_visit_date)),s.a.createElement("tr",null,s.a.createElement("th",{className:"WField"},"Wiring Date: "),s.a.createElement("td",{className:"WData"},J.wiring_date)),s.a.createElement("tr",null,s.a.createElement("th",{className:"TIDField"},"Team ID: "),s.a.createElement("td",{className:"TIData"},J.team_id)),s.a.createElement("tr",null,s.a.createElement("th",{className:"PRDField"},"Pending Reason: "),s.a.createElement("td",{className:"PRData"},J.pendingReason)))),s.a.createElement("div",{className:"updateLogTag"},"Update Log:"),s.a.createElement("div",{className:"updateLog"},this.renderLog())))))}}]),t}(c.Component),z=(a(66),a(22)),X=a.n(z),Z=a(35),ee=a.n(Z),te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).createAndDownloadPDF=function(){X.a.post("".concat(se,"/create-pdf"),a.state).then(function(){return X.a.get("".concat(se,"/fetch-pdf"),{responseType:"blob"})}).then(function(e){var t=new Blob([e.data],{type:"application/pdf"});ee()(t,"newPdf.pdf")})},a.getItemCase=function(e){var t=Q,n=a.state.quotationIndex;fetch("".concat(se,"/itemcase/find?quotation_id=").concat(t[n].quotation_id)).then(function(e){return e.json()}).then(function(e){a.setState({itemCasesObjects:e.data})}).then(function(e){a.getItemDetails()}).catch(function(e){return console.log(e)})},a.getItemDetails=function(e){for(var t=function(e){fetch("".concat(se,"/workitems/find?field=work_item_id&keyword=").concat(a.state.itemCasesObjects[e].work_item_id)).then(function(e){return e.json()}).then(function(t){var n=Object.assign({},a.state);n.itemCasesObjects[e].Description=t.data[0].description,n.itemCasesObjects[e].Unit=t.data[0].unit,n.itemCasesObjects[e].UnitRate=t.data[0].unit_rate,a.setState({stateCopy:n}),console.log(a.state.itemCasesObjects)}).catch(function(e){return console.log(e)})},n=0;n<a.state.itemCasesObjects.length;n++)t(n)},a.renderMoreItemCases=function(e){var t=a.state.itemCasesObjects,n=[];console.log(t);for(var r=1;r<t.length;r++)n.push(s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"ItemID",value:t[r].work_item_id,readOnly:!0})),s.a.createElement("div",{className:"col-6"},s.a.createElement("input",{type:"text",className:"form-control",id:"Description",value:t[r].Description,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"Unit",value:t[r].Unit,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"UnitRate",value:"$".concat(t[r].UnitRate),readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"Qty",value:t[r].item_qty,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{type:"text",className:"form-control",id:"Amount",value:"$".concat(t[r].UnitRate*t[r].item_qty),readOnly:!0}))))));return n},a.state={pageName:"Quotaion Details",quotationIndex:a.props.quotationIndex,quotationObjects:a.props.quotationObjects,itemCasesObjects:[{}]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.getItemCase()}},{key:"render",value:function(){var e=Q,t=this.state.quotationIndex,a=this.state.itemCasesObjects;return s.a.createElement("div",{className:"QuotationDetails MainWrapper"},s.a.createElement(D,{pageName:this.state.pageName}),s.a.createElement("div",{className:"editBtnWrapper",onClick:this.createAndDownloadPDF},s.a.createElement("i",{className:"fas fa-file-pdf pdfIcon"}),s.a.createElement("div",{className:"editTag"},"Edit")),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"card"},s.a.createElement("table",{className:"table table-hover table-striped"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"orderNoField"},"Quotation ID "),s.a.createElement("td",{className:"orderNoData"},e[t].quotation_id)),s.a.createElement("tr",null,s.a.createElement("th",{className:"BSNField"},"Order#: "),s.a.createElement("td",{className:"BNSData"},e[t].order_number)),s.a.createElement("tr",null,s.a.createElement("th",{className:"statusField"},"BSN: "),s.a.createElement("td",{className:"statusData"},e[t].BSN)),s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"2"},s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"itemID"},"Item ID: "),s.a.createElement("input",{type:"text",className:"form-control",id:"ItemID",value:a[0].work_item_id,readOnly:!0})),s.a.createElement("div",{className:"col-6"},s.a.createElement("label",{htmlFor:"description"},"Description: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Description",value:a[0].Description,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"unit"},"Unit: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Unit",value:a[0].Unit,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"unitRate"},"Unit Rate: "),s.a.createElement("input",{type:"text",className:"form-control",id:"UnitRate",value:"$".concat(a[0].UnitRate),readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"qty"},"Qty: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Qty",value:a[0].item_qty,readOnly:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("label",{htmlFor:"amount"},"Amount: "),s.a.createElement("input",{type:"text",className:"form-control",id:"Amount",value:"$".concat(a[0].UnitRate*a[0].item_qty),readOnly:!0}))))),this.renderMoreItemCases())))))}}]),t}(c.Component),ae=[],ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).navOnClick=function(e){a.setState({pageType:e})},a.orderOnClick=function(e,t){a.setState({pageType:e,orderIndex:t})},a.quotationOnClick=function(e,t){a.setState({pageType:e,quotationIndex:t})},a.logout=function(e){a.setState({username:""})},a.state={orders:[],pageType:"Orders",orderIndex:0,username:y.username,quotationIndex:0},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){"hktcs"===O?(ae=["Orders","Import","Quotations"],this.setState({pageType:ae[0]})):"et"===O?(ae=["Orders","Upload Quotation","Quotations"],this.setState({pageType:ae[0]})):(ae=["Orders","Quotations","Work Items"],this.setState({pageType:ae[0]})),console.log(this.state.username)}},{key:"render",value:function(){var e=this.state;return s.a.createElement("div",null,""===this.state.username?s.a.createElement(S.a,{to:{pathname:"/"}}):s.a.createElement(s.a.Fragment,null,s.a.createElement(I,{onClick:this.navOnClick,logout:this.logout,items:e.items}),"hktcs"===O?s.a.createElement(s.a.Fragment,null,e.pageType===ae[0]?s.a.createElement(B,{onClick:this.orderOnClick,orderObjects:this.state.orderObjects,pageType:e.pageType}):e.pageType===ae[1]?s.a.createElement(A,{pageType:e.pageType}):e.pageType===ae[2]?s.a.createElement(W,{pageType:e.pageType,onClick:this.quotationOnClick}):e.pageType===ae[3]?s.a.createElement(L,{pageType:e.pageType}):"Odetails"===e.pageType?s.a.createElement(K,{orderIndex:this.state.orderIndex,pageType:e.pageType}):"Qdetails"===e.pageType?s.a.createElement(te,{quotationIndex:this.state.quotationIndex,pageType:e.pageType}):"profile"===e.pageType?s.a.createElement(G,{pageType:e.pageType}):s.a.createElement(s.a.Fragment,null)):s.a.createElement(s.a.Fragment,null),"et"===O?s.a.createElement(s.a.Fragment,null,e.pageType===ae[0]?s.a.createElement(B,{onClick:this.orderOnClick,orderObjects:this.state.orderObjects,pageType:e.pageType}):e.pageType===ae[1]?s.a.createElement(H,{pageType:e.pageType}):e.pageType===ae[2]?s.a.createElement(W,{pageType:e.pageType,onClick:this.quotationOnClick}):"Odetails"===e.pageType?s.a.createElement(K,{orderIndex:this.state.orderIndex,pageType:e.pageType}):"Qdetails"===e.pageType?s.a.createElement(te,{quotationIndex:this.state.quotationIndex,pageType:e.pageType}):"profile"===e.pageType?s.a.createElement(G,{pageType:e.pageType}):s.a.createElement(s.a.Fragment,null)):s.a.createElement(s.a.Fragment,null),"admin"===O?s.a.createElement(s.a.Fragment,null,e.pageType===ae[0]?s.a.createElement(B,{onClick:this.orderOnClick,orderObjects:this.state.orderObjects,pageType:e.pageType}):e.pageType===ae[1]?s.a.createElement(W,{pageType:e.pageType,onClick:this.quotationOnClick}):e.pageType===ae[2]?s.a.createElement(Y,{pageType:e.pageType}):e.pageType===ae[3]?s.a.createElement(L,{pageType:e.pageType}):"Odetails"===e.pageType?s.a.createElement(K,{orderIndex:this.state.orderIndex,pageType:e.pageType}):"Qdetails"===e.pageType?s.a.createElement(te,{quotationIndex:this.state.quotationIndex,pageType:e.pageType}):"profile"===e.pageType?s.a.createElement(G,{pageType:e.pageType}):s.a.createElement(s.a.Fragment,null)):s.a.createElement(s.a.Fragment,null)))}}]),t}(c.Component),re=function(){return s.a.createElement(g.a,null,s.a.createElement(f.a,null,s.a.createElement(h.a,{exact:!0,path:"/",component:k}),s.a.createElement(h.a,{path:"/LoginPage",component:k}),s.a.createElement(h.a,{path:"/main",component:ne})))},ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(re,null))}}]),t}(c.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.d(t,"serverPath",function(){return se});var se="http://localhost:8080";l.a.render(s.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.215f5abd.chunk.js.map